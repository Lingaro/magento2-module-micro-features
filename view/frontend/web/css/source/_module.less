/**
 * Copyright Â© 2023 Lingaro sp. z o.o. All rights reserved.
 * See LICENSE for license details.
 */

@lingaro-upsert-qty__control__height: 32px;
@lingaro-upsert-qty__control__margin-bottom: 10px;
@lingaro-upsert-qty__control__font-size: 14px;
@lingaro-upsert-qty__input__width: 45px;
@lingaro-upsert-qty__button__width: 32px;
@lingaro-upsert-qty__button__padding: 0;
@lingaro-upsert-qty__action-button__padding: 10px;
@lingaro-upsert-qty__success__font-size: 10px;
@lingaro-upsert-qty__success__line-height: 20px;
@lingaro-upsert-qty__success__color: green;

@lingaro-upsert-qty__product_view__scale: 1.5;
@lingaro-upsert-qty__product_view__padding: 0 0 10px;
@lingaro-upsert-qty__product_view__control__height: @lingaro-upsert-qty__control__height * @lingaro-upsert-qty__product_view__scale;
@lingaro-upsert-qty__product_view__control__margin-bottom: @lingaro-upsert-qty__control__margin-bottom * @lingaro-upsert-qty__product_view__scale;
@lingaro-upsert-qty__product_view__control__font-size: @lingaro-upsert-qty__control__font-size * @lingaro-upsert-qty__product_view__scale;
@lingaro-upsert-qty__product_view__input__width: @lingaro-upsert-qty__input__width * @lingaro-upsert-qty__product_view__scale;
@lingaro-upsert-qty__product_view__button__width: @lingaro-upsert-qty__button__width * @lingaro-upsert-qty__product_view__scale;
@lingaro-upsert-qty__product_view__button__padding: 0;
@lingaro-upsert-qty__product_view__action-button__padding: @lingaro-upsert-qty__action-button__padding * @lingaro-upsert-qty__product_view__scale;
@lingaro-upsert-qty__product_view__success__font-size: @lingaro-upsert-qty__success__font-size * @lingaro-upsert-qty__product_view__scale;
@lingaro-upsert-qty__product_view__success__line-height: @lingaro-upsert-qty__success__line-height * @lingaro-upsert-qty__product_view__scale;

//
//  Common
//  _____________________________________________

& when (@media-common = true) {
  .lingaro-upsert-qty-wrapper {
    position: relative;

    .qty-input-button {
      .lib-button(
        @_button-width: @lingaro-upsert-qty__button__width,
        @_button-padding: @lingaro-upsert-qty__button__padding,
        @_button-margin: 0 0 @lingaro-upsert-qty__control__margin-bottom,
        @_button-font-size: @lingaro-upsert-qty__control__font-size
      );
      height: @lingaro-upsert-qty__control__height;
      vertical-align: top;

      &[name="sub-button"] {
        border-right: 0;
      }

      &[name="add-button"] {
        border-left: 0;
      }
    }

    .qty {
      width: @lingaro-upsert-qty__input__width;
      height: @lingaro-upsert-qty__control__height;
      margin: 0 0 @lingaro-upsert-qty__control__margin-bottom;
      font-size: @lingaro-upsert-qty__control__font-size;
      text-align: center;
    }

    .lingaro-upsert-qty-success {
      opacity: 0;
      position: absolute;
      top: -@lingaro-upsert-qty__success__line-height;
      line-height: @lingaro-upsert-qty__success__line-height;
      .lib-font-size(@lingaro-upsert-qty__success__font-size);
      color: @lingaro-upsert-qty__success__color;
      transition: opacity 0.5s ease-out;
      white-space: nowrap;

      &.active {
        opacity: 1;
      }
    }

    .to-cart-button {
      height: @lingaro-upsert-qty__control__height;
      padding: 0 @lingaro-upsert-qty__action-button__padding;
      margin: 0 0 @lingaro-upsert-qty__control__margin-bottom;
      font-size: @lingaro-upsert-qty__control__font-size;
      vertical-align: top;
    }
  }

  .catalog-product-view {
    .lingaro-upsert-qty-wrapper {
      padding: @lingaro-upsert-qty__product_view__padding;

      .qty-input-button {
        .lib-button(
          @_button-width: @lingaro-upsert-qty__product_view__button__width,
          @_button-padding: @lingaro-upsert-qty__product_view__button__padding,
          @_button-margin: 0 0 @lingaro-upsert-qty__product_view__control__margin-bottom,
          @_button-font-size: @lingaro-upsert-qty__product_view__control__font-size
        );
        height: @lingaro-upsert-qty__product_view__control__height;
        vertical-align: top;
      }

      .qty {
        width: @lingaro-upsert-qty__product_view__input__width;
        height: @lingaro-upsert-qty__product_view__control__height;
        margin: 0 0 @lingaro-upsert-qty__product_view__control__margin-bottom;
        font-size: @lingaro-upsert-qty__product_view__control__font-size;
      }

      .lingaro-upsert-qty-success {
        top: -@lingaro-upsert-qty__product_view__success__line-height;
        line-height: @lingaro-upsert-qty__product_view__success__line-height;
        .lib-font-size(@lingaro-upsert-qty__product_view__success__font-size);
      }

      .to-cart-button {
        height: @lingaro-upsert-qty__product_view__control__height;
        padding: 0 @lingaro-upsert-qty__product_view__action-button__padding;
        margin: 0 0 @lingaro-upsert-qty__product_view__control__margin-bottom;
        font-size: @lingaro-upsert-qty__product_view__control__font-size;
      }
    }
  }

  .catalog-product_compare-index {
    .lingaro-upsert-qty-wrapper {
      .qty-input-button, .qty, .to-cart-button {
        margin-bottom: 0;
      }
    }
  }
}
